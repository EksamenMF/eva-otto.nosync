---
// @ts-nocheck
import { slide } from 'astro:transitions';
import Layout from '../../layouts/Layout.astro';

export async function getStaticPaths() {
  const url = "https://wnkjsxgrwbocyrqdebfj.supabase.co/rest/v1/produkter";
  const options = {
    method: "GET",
    headers: {
      apikey: `eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Indua2pzeGdyd2JvY3lycWRlYmZqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzM3NDM3NzcsImV4cCI6MjA0OTMxOTc3N30.-JwL6KZXBey-gpbEkjNewRBPoUYM7hSEnRYeXgqpHHU`,
    }
  };

  const produkter = await fetch(url, options).then((res) => res.json());
  return produkter.map((data) => ({
    params: { slug: data.slug }, // [artist]=artist.slug
    props: {
      data,
    }, // send al data med som props
  }));
}

const {data} = Astro.props
console.log(data);
---

<Layout title={data.name}>
  <div class="product-card">
    <div class="product-images">
      <!-- Thumbnails (dupliker hovedbilledet, eller tilføj flere, hvis du har forskellige billeder) -->
      <div class="thumbnails">
        <img src={`/img/${data.image}`} alt={`${data.name} thumbnail`} />
        <img src={`/img/${data.image}`} alt={`${data.name} thumbnail`} />
        <img src={`/img/${data.image}`} alt={`${data.name} thumbnail`} />
      </div>
      
      <div class="main-image">
        <img src={`/img/${data.image}`} alt={data.name} />
      </div>
    </div>

    <div class="product-info">
      <h2>{data.name}</h2>
      <p class="price">{data.pris} DKK</p>
      {data.kg && <p class="kg">{data.kg}</p>}
      <h3>Produktbeskrivelse:</h3>
      <p class="description">{data.description}</p>
      
      <div class="buy-section">
        <div class="quantity">
          <button>-</button>
          <span>1 STK</span>
          <button>+</button>
        </div>
        <button class="add-to-cart">TILFØJ TIL KURV</button>
      </div>
    </div>
  </div>
</Layout>

<style>
.product-card {
  display: flex;
  gap: 20px;
  padding: 40px;
  box-sizing: border-box;
}

.product-images {
  display: flex;
  gap: 20px;
}

.thumbnails {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.thumbnails img {
  width: 80px;
  height: auto;
  border: 1px solid #ccc;
  cursor: pointer;
}

.main-image img {
  width: 400px;
  height: auto;
  border: 1px solid #ccc;
}

.product-info {
  flex: 1;
  display: flex;
  flex-direction: column;
}

.product-info h2 {
  margin: 0;
  font-size: 1.8rem;
  color: #19437D;
}

.price {
  font-weight: bold;
  margin: 10px 0;
  color: #19437D;
}

.kg {
  margin-bottom: 20px;
}

h3 {
  margin-bottom: 10px;
}

.description {
  margin-bottom: 20px;
  line-height: 1.6;
  opacity: 0.9;
}

.buy-section {
  display: flex;
  gap: 20px;
  align-items: center;
  margin-top: 20px;
}

.quantity {
  display: flex;
  gap: 10px;
  align-items: center;
}

.quantity button {
  padding: 5px 10px;
  border: 1px solid #19437D;
  background: #fff;
  color: #19437D;
  cursor: pointer;
}

.add-to-cart {
  padding: 10px 20px;
  background: #19437D;
  color: #fff;
  border: none;
  cursor: pointer;
}

.add-to-cart:hover {
  background: #002a80;
}

/* Responsivt design */
@media (max-width: 768px) {
  .product-card {
    flex-direction: column;
    align-items: center;
  }

  .main-image img {
    width: 80%;
  }
}
</style>